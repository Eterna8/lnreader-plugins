var t=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{c(n.next(t))}catch(t){o(t)}}function s(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))},e=this&&this.__generator||function(t,e){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("@libs/fetch"),n=require("cheerio"),i=require("@libs/defaultCover"),o=function(){function o(){var t=this;this.id="readhive",this.name="ReadHive",this.icon="src/en/readhive/readhive.jpg",this.site="https://readhive.org",this.version="2.0.0",this.filters=void 0,this.resolveUrl=function(e){return e.startsWith("http")?e:t.site+(e.startsWith("/")?e:"/"+e)}}return o.prototype.popularNovels=function(o,a){return t(this,void 0,void 0,(function(){var t,s,c,h,l=this;return e(this,(function(e){switch(e.label){case 0:return t=[],o>1?[2,t]:(s=this.site,[4,(0,r.fetchApi)(s)]);case 1:return[4,e.sent().text()];case 2:return c=e.sent(),h=(0,n.load)(c),a.showLatestNovels?h('h2:contains("Latest Updates")').next("div.flex.flex-wrap").children("div.flex.flex-col.w-full.px-2.mb-4").each((function(e,r){var n=h(r).find("a.text-lg.font-medium").text().trim(),o=h(r).find("a.peer").attr("href"),a=h(r).find("img").attr("src");a&&!a.startsWith("http")&&(a=l.resolveUrl(a)),o&&t.push({name:n,path:o,cover:a||i.defaultCover})})):h('h2:contains("Popular This Month")').nextAll("div").find(".swiper-slide.w-32.flex-shrink-0.group").each((function(e,r){var n=h(r).find("h6.mt-2.text-sm.font-medium").text().trim(),o=h(r).find("a").attr("href"),a=h(r).find("img").attr("src");a&&!a.startsWith("http")&&(a=l.resolveUrl(a)),o&&(t.some((function(t){return t.path===o}))||t.push({name:n,path:o,cover:a||i.defaultCover}))})),[2,t]}}))}))},o.prototype.searchNovels=function(o,a){return t(this,void 0,void 0,(function(){var t,s,c,h,l=this;return e(this,(function(e){switch(e.label){case 0:return t="".concat(this.site,"/?s=").concat(o,"&page=").concat(a),[4,(0,r.fetchApi)(t)];case 1:return[4,e.sent().text()];case 2:return s=e.sent(),c=(0,n.load)(s),h=[],c("div.col-6.col-md-3.mb-4").each((function(t,e){var r=c(e).find("h5").text().trim(),n=c(e).find("a").attr("href"),o=c(e).find("img").attr("src");o&&!o.startsWith("http")&&(o=l.resolveUrl(o)),n&&h.push({name:r,path:n,cover:o||i.defaultCover})})),[2,h]}}))}))},o.prototype.parseNovel=function(o){return t(this,void 0,void 0,(function(){var t,a,s,c,h,l,u,f=this;return e(this,(function(e){switch(e.label){case 0:return t={path:o,name:"UNKNOWN",chapters:[]},a=this.resolveUrl(o),[4,(0,r.fetchApi)(a)];case 1:return[4,e.sent().text()];case 2:return s=e.sent(),c=(0,n.load)(s),t.name=c("h1.flex-grow.flex-shrink.mb-1.text-2xl.font-bold.lg:text-3xl.line-clamp-4").text().trim(),t.cover=this.resolveUrl(c("div.aspect-w-3.aspect-h-4.lg:aspect-w-4.lg:aspect-h-6.rounded.overflow-hidden img").attr("src")||i.defaultCover),t.author=c("span.leading-7.md:text-xl").text().trim(),h=[],c('h2:contains("Synopsis")').next("div.mb-4").find("p").each((function(t,e){h.push(c(e).text().trim())})),t.summary=h.join("\n"),l=[],c("div.flex.flex-wrap a.px-3.py-1.mb-1.mr-2.text-sm.text-foreground.bg-shade.rounded.shadow-md.hover:bg-red.hover:text-white").each((function(){l.push(c(this).text())})),t.genres=l.join(", "),u=[],c('h3:contains("Table of Contents")').next("div.p-2.overflow-hidden.border.border-accent-border.rounded.shadow").find("a.flex.items-center.p-2.rounded.bg-accent.hover:bg-accent-hover").each((function(t,e){var r=c(e).find("span.ml-1").text().trim(),n=c(e).attr("href"),i=c(e).find("span.text-xs").text().trim();n&&u.push({name:r,path:n.replace(f.site,""),releaseTime:i})})),t.chapters=u,[2,t]}}))}))},o.prototype.parseChapter=function(i){return t(this,void 0,void 0,(function(){var t,o,a,s;return e(this,(function(e){switch(e.label){case 0:return t=this.resolveUrl(i),[4,(0,r.fetchApi)(t)];case 1:return[4,e.sent().text()];case 2:return o=e.sent(),a=(0,n.load)(o),(s=a("div.relative.lg:grid-in-content.mt-4")).find("div.socials").remove(),s.find("div.reader-settings").remove(),s.find("div.nav-wrapper").remove(),s.find("div.code-block").remove(),s.find('p:contains("• • •")').remove(),[2,s.html()||""]}}))}))},o}();exports.default=new o;